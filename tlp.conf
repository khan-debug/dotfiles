#------------------------------------------------------------------------------
# TLP configuration file â€“ Safe baseline for laptops
# This version disables GPU and runtime power tweaks that can cause freezes
#------------------------------------------------------------------------------

# Enable TLP
TLP_ENABLE=1

# Select battery/power mode (defaults)
TLP_DEFAULT_MODE=AC
TLP_PERSISTENT_DEFAULT=0

#------------------------------------------------------------------------------
# CPU Settings (Balanced performance)
#------------------------------------------------------------------------------
CPU_DRIVER_OPMODE_ON_AC=active
CPU_DRIVER_OPMODE_ON_BAT=active

CPU_SCALING_GOVERNOR_ON_AC=schedutil
CPU_SCALING_GOVERNOR_ON_BAT=schedutil

CPU_ENERGY_PERF_POLICY_ON_AC=balance_performance
CPU_ENERGY_PERF_POLICY_ON_BAT=balance_power

CPU_BOOST_ON_AC=1
CPU_BOOST_ON_BAT=0

PLATFORM_PROFILE_ON_AC=balanced
PLATFORM_PROFILE_ON_BAT=balanced

#------------------------------------------------------------------------------
# GPU / Graphics (Disable tuning to prevent freeze)
#------------------------------------------------------------------------------
INTEL_GPU_MIN_FREQ_ON_AC=0
INTEL_GPU_MIN_FREQ_ON_BAT=0
INTEL_GPU_MAX_FREQ_ON_AC=0
INTEL_GPU_MAX_FREQ_ON_BAT=0
INTEL_GPU_BOOST_FREQ_ON_AC=0
INTEL_GPU_BOOST_FREQ_ON_BAT=0

RADEON_DPM_STATE_ON_AC=performance
RADEON_DPM_STATE_ON_BAT=performance
RADEON_DPM_PERF_LEVEL_ON_AC=auto
RADEON_DPM_PERF_LEVEL_ON_BAT=auto

#------------------------------------------------------------------------------
# Runtime / PCIe Power Management (Safe defaults)
#------------------------------------------------------------------------------
RUNTIME_PM_ON_AC=on
RUNTIME_PM_ON_BAT=on
PCIE_ASPM_ON_AC=default
PCIE_ASPM_ON_BAT=default

#------------------------------------------------------------------------------
# Disk / Storage
#------------------------------------------------------------------------------
DISK_IDLE_SECS_ON_AC=0
DISK_IDLE_SECS_ON_BAT=2

DISK_APM_LEVEL_ON_AC=254
DISK_APM_LEVEL_ON_BAT=128

DISK_SPINDOWN_TIMEOUT_ON_AC=0
DISK_SPINDOWN_TIMEOUT_ON_BAT=0

#------------------------------------------------------------------------------
# USB Autosuspend (Safe: disabled)
#------------------------------------------------------------------------------
USB_AUTOSUSPEND=0

#------------------------------------------------------------------------------
# Battery / Charging thresholds (keep defaults)
#------------------------------------------------------------------------------
# BAT0_START_CHARGE_THRESH=75
# BAT0_STOP_CHARGE_THRESH=90

#------------------------------------------------------------------------------
# Miscellaneous
#------------------------------------------------------------------------------
RESTORE_DEVICE_STATE_ON_STARTUP=1
